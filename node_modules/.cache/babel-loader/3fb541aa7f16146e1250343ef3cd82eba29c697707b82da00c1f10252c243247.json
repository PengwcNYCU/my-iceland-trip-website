{"ast":null,"code":"// src/components/iceland-trip/liveInfo.js\nimport React,{useState,useEffect}from'react';import{Info,CloudSnow,AlertCircle,ExternalLink,Map,RefreshCw,Wifi,WifiOff,CheckCircle,XCircle,AlertTriangle,HelpCircle,Moon,Star}from'lucide-react';import{fetchRoadAlerts,getAlertSeverityUI}from'../../utils/rssFetcher';import{isDataStale,getLastUpdated}from'../../utils/offlineStorage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LiveInfo=_ref=>{let{theme}=_ref;const[roadAlerts,setRoadAlerts]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isOnline,setIsOnline]=useState(navigator.onLine);const[lastUpdated,setLastUpdated]=useState(null);const[error,setError]=useState(null);// 處理網絡狀態變化\nuseEffect(()=>{const handleOnlineStatus=()=>{setIsOnline(navigator.onLine);};window.addEventListener('online',handleOnlineStatus);window.addEventListener('offline',handleOnlineStatus);// 也訂閱自定義事件\nconst handleNetworkStatusChange=event=>{setIsOnline(event.detail.isOnline);};window.addEventListener('network-status-change',handleNetworkStatusChange);return()=>{window.removeEventListener('online',handleOnlineStatus);window.removeEventListener('offline',handleOnlineStatus);window.removeEventListener('network-status-change',handleNetworkStatusChange);};},[]);// 加載數據\nuseEffect(()=>{loadRoadAlerts();// 獲取最後更新時間\nconst lastTime=getLastUpdated();if(lastTime){setLastUpdated(lastTime);}// 設置定期刷新（只在線時）\nconst refreshInterval=setInterval(()=>{if(navigator.onLine){loadRoadAlerts(false);}},30*60*1000);// 每30分鐘\nreturn()=>clearInterval(refreshInterval);},[]);// 加載道路警報\nconst loadRoadAlerts=async function(){let forceRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;setIsLoading(true);setError(null);try{// 只有在線時才強制刷新\nconst shouldForceRefresh=forceRefresh&&isOnline;const alerts=await fetchRoadAlerts(shouldForceRefresh);setRoadAlerts(alerts);// 更新最後更新時間\nconst lastTime=getLastUpdated();if(lastTime){setLastUpdated(lastTime);}}catch(error){console.error('加載道路警報失敗:',error);setError('無法加載道路警報，請稍後再試');}finally{setIsLoading(false);}};// 手動刷新數據\nconst handleRefresh=()=>{loadRoadAlerts(true);};// 格式化最後更新時間\nconst formatLastUpdated=date=>{if(!date)return'未知';const now=new Date();const diffMs=now-date;const diffMins=Math.floor(diffMs/(1000*60));if(diffMins<1){return'剛剛';}else if(diffMins<60){return`${diffMins} 分鐘前`;}else if(diffMins<24*60){const hours=Math.floor(diffMins/60);return`${hours} 小時前`;}else{const days=Math.floor(diffMins/(60*24));return`${days} 天前`;}};// 根據狀態獲取圖標元件\nconst getStatusIcon=status=>{switch(status){case'closed':return/*#__PURE__*/_jsx(XCircle,{className:\"h-4 w-4 text-red-500\"});case'partial':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-orange-500\"});case'caution':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-4 w-4 text-yellow-500\"});case'open':return/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 text-green-500\"});default:return/*#__PURE__*/_jsx(HelpCircle,{className:\"h-4 w-4 text-gray-500\"});}};// 根據狀態獲取背景色\nconst getStatusBackground=(status,isDarkMode)=>{switch(status){case'closed':return isDarkMode?'bg-red-900 bg-opacity-20':'bg-red-50';case'partial':return isDarkMode?'bg-orange-900 bg-opacity-20':'bg-orange-50';case'caution':return isDarkMode?'bg-yellow-900 bg-opacity-20':'bg-yellow-50';case'open':return isDarkMode?'bg-green-900 bg-opacity-20':'bg-green-50';default:return isDarkMode?'bg-gray-800 bg-opacity-20':'bg-gray-50';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:`text-xl font-semibold flex items-center gap-2`,children:[/*#__PURE__*/_jsx(Info,{className:`h-6 w-6 ${theme.highlight}`}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u51B0\\u5CF6\\u5373\\u6642\\u8CC7\\u8A0A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[isOnline?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-green-500\",children:[/*#__PURE__*/_jsx(Wifi,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\u5728\\u7DDA\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-orange-500\",children:[/*#__PURE__*/_jsx(WifiOff,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"\\u96E2\\u7DDA\\u6A21\\u5F0F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefresh,disabled:isLoading||!isOnline,className:`p-1 rounded ${theme.button} text-white disabled:opacity-50`,title:\"\\u5237\\u65B0\\u9053\\u8DEF\\u8B66\\u5831\",children:/*#__PURE__*/_jsx(RefreshCw,{className:`h-4 w-4 ${isLoading?'animate-spin':''}`})})]})]}),lastUpdated&&/*#__PURE__*/_jsxs(\"div\",{className:`text-xs ${theme.secondaryText} -mt-4`,children:[\"\\u6700\\u5F8C\\u66F4\\u65B0: \",formatLastUpdated(lastUpdated),isDataStale()&&!isLoading&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-orange-500\",children:\"\\uFF08\\u6578\\u64DA\\u53EF\\u80FD\\u5DF2\\u904E\\u671F\\uFF09\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder} border-purple-300 ${theme.darkMode?'border-opacity-30':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:`${theme.darkMode?'text-purple-300':'text-purple-600'}`,children:/*#__PURE__*/_jsx(Moon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u5317\\u6975\\u5149\\u9810\\u6E2C\"})]}),/*#__PURE__*/_jsx(\"p\",{className:`${theme.secondaryText} mb-4`,children:\"\\u51B0\\u5CF6\\u662F\\u89C0\\u6E2C\\u5317\\u6975\\u5149\\u7684\\u7D55\\u4F73\\u5730\\u9EDE\\uFF0C\\u7279\\u5225\\u662F\\u57289\\u6708\\u81F34\\u6708\\u7684\\u9ED1\\u591C\\u671F\\u9593\\u3002\\u53EF\\u4EE5\\u900F\\u904E\\u4EE5\\u4E0B\\u8CC7\\u6E90\\u67E5\\u770B\\u5373\\u6642\\u548C\\u9810\\u6E2C\\u7684\\u6975\\u5149\\u6D3B\\u52D5\\u3002\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"https://en.vedur.is/weather/forecasts/aurora/\",target:\"_blank\",rel:\"noopener noreferrer\",className:`p-4 rounded-lg ${theme.darkMode?'bg-purple-900 bg-opacity-20 hover:bg-opacity-30':'bg-purple-50 hover:bg-purple-100'} transition flex items-start gap-3`,children:[/*#__PURE__*/_jsx(\"div\",{className:`${theme.darkMode?'text-purple-300':'text-purple-600'} mt-1`,children:/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-1\",children:\"\\u51B0\\u5CF6\\u6C23\\u8C61\\u5C40\\u6975\\u5149\\u9810\\u6E2C\"}),/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${theme.secondaryText}`,children:\"\\u5B98\\u65B9\\u63D0\\u4F9B\\u51B0\\u5CF6\\u5730\\u5340\\u7684\\u6975\\u5149\\u6D3B\\u52D5\\u9810\\u6E2C\\u548C\\u96F2\\u5C64\\u8986\\u84CB\\u60C5\\u6CC1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.highlight,children:\"\\u67E5\\u770B\\u9810\\u6E2C\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3 ml-1\"})]})]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.spaceweatherlive.com/en/auroral-activity/aurora-forecast.html\",target:\"_blank\",rel:\"noopener noreferrer\",className:`p-4 rounded-lg ${theme.darkMode?'bg-purple-900 bg-opacity-20 hover:bg-opacity-30':'bg-purple-50 hover:bg-purple-100'} transition flex items-start gap-3`,children:[/*#__PURE__*/_jsx(\"div\",{className:`${theme.darkMode?'text-purple-300':'text-purple-600'} mt-1`,children:/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium mb-1\",children:\"Space Weather Live\"}),/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${theme.secondaryText}`,children:\"\\u63D0\\u4F9B\\u5168\\u7403\\u6975\\u5149\\u9810\\u6E2C\\u548C\\u592A\\u967D\\u6D3B\\u52D5\\u5373\\u6642\\u8CC7\\u8A0A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.highlight,children:\"\\u67E5\\u770B\\u9810\\u6E2C\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3 ml-1\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:`w-5 h-5 ${theme.darkMode?'text-red-400':'text-red-500'}`}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u9053\\u8DEF\\u8B66\\u5831\"})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"py-8 flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:`p-4 rounded-lg ${theme.darkMode?'bg-red-900 bg-opacity-20':'bg-red-50'}`,children:[/*#__PURE__*/_jsx(\"p\",{className:theme.darkMode?'text-red-300':'text-red-600',children:error}),!isOnline&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"\\u60A8\\u76EE\\u524D\\u8655\\u65BC\\u96E2\\u7DDA\\u6A21\\u5F0F\\u3002\\u8ACB\\u9023\\u63A5\\u7DB2\\u7D61\\u5F8C\\u91CD\\u8A66\\u3002\"})]}):roadAlerts.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[roadAlerts.slice(0,5).map((alert,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`p-3 rounded-lg ${getStatusBackground(alert.status,theme.darkMode)}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[getStatusIcon(alert.status),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:alert.road||alert.title})]}),/*#__PURE__*/_jsx(\"div\",{className:`text-xs ${theme.secondaryText}`,children:alert.pubDate?new Date(alert.pubDate).toLocaleDateString():''})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1 line-clamp-2\",children:alert.description}),alert.link&&/*#__PURE__*/_jsxs(\"a\",{href:alert.link,target:\"_blank\",rel:\"noopener noreferrer\",className:`text-xs flex items-center mt-2 ${theme.highlight}`,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u67E5\\u770B\\u8A73\\u60C5\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3 ml-1\"})]})]},alert.id||index)),roadAlerts.length>5&&/*#__PURE__*/_jsxs(\"p\",{className:`text-sm ${theme.secondaryText} text-center`,children:[\"\\u9084\\u6709 \",roadAlerts.length-5,\" \\u5247\\u8B66\\u5831\\u672A\\u986F\\u793A\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:`p-4 rounded-lg ${theme.darkMode?'bg-blue-900 bg-opacity-20':'bg-blue-50'} text-center`,children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u76EE\\u524D\\u6C92\\u6709\\u6D3B\\u8E8D\\u7684\\u9053\\u8DEF\\u8B66\\u5831\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:\"\\u5B89\\u5168\\u9806\\u5229\\u7684\\u65C5\\u7A0B\\uFF01\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.road.is/travel-info/road-conditions-and-weather/\",target:\"_blank\",rel:\"noopener noreferrer\",className:`${theme.cardBg} rounded-xl p-4 ${theme.cardBorder} hover:shadow-lg transition-all transform hover:-translate-y-1`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`${theme.darkMode?'bg-blue-800':'bg-blue-100'} rounded-full p-2`,children:/*#__PURE__*/_jsx(Info,{className:`h-5 w-5 ${theme.darkMode?'text-blue-200':'text-blue-600'}`})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u9053\\u8DEF\\u72C0\\u6CC1\"})]}),/*#__PURE__*/_jsx(\"p\",{className:`${theme.secondaryText} text-sm mb-3`,children:\"\\u67E5\\u770B\\u51B0\\u5CF6\\u5B98\\u65B9\\u9053\\u8DEF\\u7BA1\\u7406\\u5C40\\u767C\\u5E03\\u7684\\u9053\\u8DEF\\u72C0\\u6CC1\\u548C\\u5C01\\u9589\\u4FE1\\u606F\\uFF0C\\u78BA\\u4FDD\\u5B89\\u5168\\u884C\\u8ECA\\u3002\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm font-medium mt-auto\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.highlight,children:\"\\u67E5\\u770B\\u5B98\\u65B9\\u4FE1\\u606F\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3 ml-1\"})]})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://safetravel.is/\",target:\"_blank\",rel:\"noopener noreferrer\",className:`${theme.cardBg} rounded-xl p-4 ${theme.cardBorder} hover:shadow-lg transition-all transform hover:-translate-y-1`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:`${theme.darkMode?'bg-green-800':'bg-green-100'} rounded-full p-2`,children:/*#__PURE__*/_jsx(AlertCircle,{className:`h-5 w-5 ${theme.darkMode?'text-green-200':'text-green-600'}`})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u5B89\\u5168\\u65C5\\u884C\"})]}),/*#__PURE__*/_jsx(\"p\",{className:`${theme.secondaryText} text-sm mb-3`,children:\"\\u67E5\\u770B\\u51B0\\u5CF6\\u5B98\\u65B9\\u5B89\\u5168\\u65C5\\u884C\\u7DB2\\u7AD9\\uFF0C\\u7372\\u53D6\\u6700\\u65B0\\u7684\\u5B89\\u5168\\u8B66\\u793A\\u548C\\u65C5\\u884C\\u5EFA\\u8B70\\u3002\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm font-medium mt-auto\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.highlight,children:\"\\u8A2A\\u554F\\u5B89\\u5168\\u65C5\\u884C\\u7DB2\\u7AD9\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"h-3 w-3 ml-1\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder} border-amber-200 ${theme.darkMode?'border-opacity-30':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:`w-5 h-5 ${theme.darkMode?'text-amber-400':'text-amber-500'}`}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"\\u65C5\\u884C\\u5B89\\u5168\\u63D0\\u793A\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.darkMode?'text-amber-400':'text-amber-500',children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u51AC\\u5B63\\u51B0\\u5CF6\\u5929\\u6C23\\u591A\\u8B8A\\uFF0C\\u8ACB\\u52D9\\u5FC5\\u6642\\u523B\\u95DC\\u6CE8\\u5929\\u6C23\\u9810\\u5831\\u53CA\\u8DEF\\u6CC1\\uFF0C\\u4E26\\u9810\\u7559\\u5145\\u88D5\\u7684\\u4EA4\\u901A\\u6642\\u9593\\u3002\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.darkMode?'text-amber-400':'text-amber-500',children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u7DCA\\u6025\\u96FB\\u8A71\\uFF1A112 (\\u5168\\u51B0\\u5CF6\\u901A\\u7528)\\u3002\\u5EFA\\u8B70\\u4E0B\\u8F09\\u51B0\\u5CF6112\\u5B98\\u65B9\\u61C9\\u7528\\u7A0B\\u5F0F\\uFF0C\\u53EF\\u5728\\u7DCA\\u6025\\u60C5\\u6CC1\\u4E0B\\u6C42\\u52A9\\u3002\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:theme.darkMode?'text-amber-400':'text-amber-500',children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u51AC\\u5B63\\u9053\\u8DEF\\u884C\\u99DB\\u9700\\u683C\\u5916\\u8B39\\u614E\\uFF0CF\\u958B\\u982D\\u7684\\u9AD8\\u5730\\u9053\\u8DEF\\u5728\\u51AC\\u5B63\\u901A\\u5E38\\u6703\\u5B8C\\u5168\\u95DC\\u9589\\u3002\"})]})]})]})]});};export default LiveInfo;","map":{"version":3,"names":["React","useState","useEffect","Info","CloudSnow","AlertCircle","ExternalLink","Map","RefreshCw","Wifi","WifiOff","CheckCircle","XCircle","AlertTriangle","HelpCircle","Moon","Star","fetchRoadAlerts","getAlertSeverityUI","isDataStale","getLastUpdated","jsx","_jsx","jsxs","_jsxs","LiveInfo","_ref","theme","roadAlerts","setRoadAlerts","isLoading","setIsLoading","isOnline","setIsOnline","navigator","onLine","lastUpdated","setLastUpdated","error","setError","handleOnlineStatus","window","addEventListener","handleNetworkStatusChange","event","detail","removeEventListener","loadRoadAlerts","lastTime","refreshInterval","setInterval","clearInterval","forceRefresh","arguments","length","undefined","shouldForceRefresh","alerts","console","handleRefresh","formatLastUpdated","date","now","Date","diffMs","diffMins","Math","floor","hours","days","getStatusIcon","status","className","getStatusBackground","isDarkMode","children","highlight","onClick","disabled","button","title","secondaryText","cardBg","cardBorder","darkMode","href","target","rel","slice","map","alert","index","road","pubDate","toLocaleDateString","description","link","id"],"sources":["C:/Users/wesle/OneDrive - KU Leuven/Desktop/Iceland/my-iceland-trip-website/src/components/iceland-trip/liveInfo.js"],"sourcesContent":["// src/components/iceland-trip/liveInfo.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Info, CloudSnow, AlertCircle, ExternalLink, Map, RefreshCw, Wifi, WifiOff, CheckCircle, XCircle, AlertTriangle, HelpCircle, Moon, Star } from 'lucide-react';\r\nimport { fetchRoadAlerts, getAlertSeverityUI } from '../../utils/rssFetcher';\r\nimport { isDataStale, getLastUpdated } from '../../utils/offlineStorage';\r\n\r\nconst LiveInfo = ({ theme }) => {\r\n  const [roadAlerts, setRoadAlerts] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  // 處理網絡狀態變化\r\n  useEffect(() => {\r\n    const handleOnlineStatus = () => {\r\n      setIsOnline(navigator.onLine);\r\n    };\r\n    \r\n    window.addEventListener('online', handleOnlineStatus);\r\n    window.addEventListener('offline', handleOnlineStatus);\r\n\r\n    // 也訂閱自定義事件\r\n    const handleNetworkStatusChange = (event) => {\r\n      setIsOnline(event.detail.isOnline);\r\n    };\r\n    \r\n    window.addEventListener('network-status-change', handleNetworkStatusChange);\r\n    \r\n    return () => {\r\n      window.removeEventListener('online', handleOnlineStatus);\r\n      window.removeEventListener('offline', handleOnlineStatus);\r\n      window.removeEventListener('network-status-change', handleNetworkStatusChange);\r\n    };\r\n  }, []);\r\n\r\n  // 加載數據\r\n  useEffect(() => {\r\n    loadRoadAlerts();\r\n    \r\n    // 獲取最後更新時間\r\n    const lastTime = getLastUpdated();\r\n    if (lastTime) {\r\n      setLastUpdated(lastTime);\r\n    }\r\n    \r\n    // 設置定期刷新（只在線時）\r\n    const refreshInterval = setInterval(() => {\r\n      if (navigator.onLine) {\r\n        loadRoadAlerts(false);\r\n      }\r\n    }, 30 * 60 * 1000); // 每30分鐘\r\n    \r\n    return () => clearInterval(refreshInterval);\r\n  }, []);\r\n\r\n  // 加載道路警報\r\n  const loadRoadAlerts = async (forceRefresh = false) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // 只有在線時才強制刷新\r\n      const shouldForceRefresh = forceRefresh && isOnline;\r\n      const alerts = await fetchRoadAlerts(shouldForceRefresh);\r\n      \r\n      setRoadAlerts(alerts);\r\n      \r\n      // 更新最後更新時間\r\n      const lastTime = getLastUpdated();\r\n      if (lastTime) {\r\n        setLastUpdated(lastTime);\r\n      }\r\n    } catch (error) {\r\n      console.error('加載道路警報失敗:', error);\r\n      setError('無法加載道路警報，請稍後再試');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // 手動刷新數據\r\n  const handleRefresh = () => {\r\n    loadRoadAlerts(true);\r\n  };\r\n\r\n  // 格式化最後更新時間\r\n  const formatLastUpdated = (date) => {\r\n    if (!date) return '未知';\r\n    \r\n    const now = new Date();\r\n    const diffMs = now - date;\r\n    const diffMins = Math.floor(diffMs / (1000 * 60));\r\n    \r\n    if (diffMins < 1) {\r\n      return '剛剛';\r\n    } else if (diffMins < 60) {\r\n      return `${diffMins} 分鐘前`;\r\n    } else if (diffMins < 24 * 60) {\r\n      const hours = Math.floor(diffMins / 60);\r\n      return `${hours} 小時前`;\r\n    } else {\r\n      const days = Math.floor(diffMins / (60 * 24));\r\n      return `${days} 天前`;\r\n    }\r\n  };\r\n  \r\n  // 根據狀態獲取圖標元件\r\n  const getStatusIcon = (status) => {\r\n    switch(status) {\r\n      case 'closed':\r\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\r\n      case 'partial':\r\n        return <AlertTriangle className=\"h-4 w-4 text-orange-500\" />;\r\n      case 'caution':\r\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\r\n      case 'open':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n      default:\r\n        return <HelpCircle className=\"h-4 w-4 text-gray-500\" />;\r\n    }\r\n  };\r\n  \r\n  // 根據狀態獲取背景色\r\n  const getStatusBackground = (status, isDarkMode) => {\r\n    switch(status) {\r\n      case 'closed':\r\n        return isDarkMode ? 'bg-red-900 bg-opacity-20' : 'bg-red-50';\r\n      case 'partial':\r\n        return isDarkMode ? 'bg-orange-900 bg-opacity-20' : 'bg-orange-50';\r\n      case 'caution':\r\n        return isDarkMode ? 'bg-yellow-900 bg-opacity-20' : 'bg-yellow-50';\r\n      case 'open':\r\n        return isDarkMode ? 'bg-green-900 bg-opacity-20' : 'bg-green-50';\r\n      default:\r\n        return isDarkMode ? 'bg-gray-800 bg-opacity-20' : 'bg-gray-50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 mt-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className={`text-xl font-semibold flex items-center gap-2`}>\r\n          <Info className={`h-6 w-6 ${theme.highlight}`} />\r\n          <span>冰島即時資訊</span>\r\n        </h2>\r\n        \r\n        {/* 網絡狀態指示器 */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {isOnline ? (\r\n            <div className=\"flex items-center text-green-500\">\r\n              <Wifi className=\"h-4 w-4 mr-1\" />\r\n              <span className=\"text-xs\">在線</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center text-orange-500\">\r\n              <WifiOff className=\"h-4 w-4 mr-1\" />\r\n              <span className=\"text-xs\">離線模式</span>\r\n            </div>\r\n          )}\r\n          \r\n          {/* 刷新按鈕 */}\r\n          <button \r\n            onClick={handleRefresh}\r\n            disabled={isLoading || !isOnline}\r\n            className={`p-1 rounded ${theme.button} text-white disabled:opacity-50`}\r\n            title=\"刷新道路警報\"\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* 最後更新時間 */}\r\n      {lastUpdated && (\r\n        <div className={`text-xs ${theme.secondaryText} -mt-4`}>\r\n          最後更新: {formatLastUpdated(lastUpdated)}\r\n          {isDataStale() && !isLoading && (\r\n            <span className=\"ml-1 text-orange-500\">（數據可能已過期）</span>\r\n          )}\r\n        </div>\r\n      )}\r\n      \r\n      {/* 極光資訊卡片 - 新增 */}\r\n      <div className={`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder} border-purple-300 ${theme.darkMode ? 'border-opacity-30' : ''}`}>\r\n        <div className=\"flex items-center gap-2 mb-3\">\r\n          <div className={`${theme.darkMode ? 'text-purple-300' : 'text-purple-600'}`}>\r\n            <Moon className=\"w-5 h-5\" />\r\n          </div>\r\n          <h3 className=\"text-lg font-semibold\">北極光預測</h3>\r\n        </div>\r\n        \r\n        <p className={`${theme.secondaryText} mb-4`}>\r\n          冰島是觀測北極光的絕佳地點，特別是在9月至4月的黑夜期間。可以透過以下資源查看即時和預測的極光活動。\r\n        </p>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <a \r\n            href=\"https://en.vedur.is/weather/forecasts/aurora/\" \r\n            target=\"_blank\" \r\n            rel=\"noopener noreferrer\"\r\n            className={`p-4 rounded-lg ${theme.darkMode ? 'bg-purple-900 bg-opacity-20 hover:bg-opacity-30' : 'bg-purple-50 hover:bg-purple-100'} transition flex items-start gap-3`}\r\n          >\r\n            <div className={`${theme.darkMode ? 'text-purple-300' : 'text-purple-600'} mt-1`}>\r\n              <Star className=\"w-4 h-4\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"font-medium mb-1\">冰島氣象局極光預測</div>\r\n              <div className={`text-sm ${theme.secondaryText}`}>官方提供冰島地區的極光活動預測和雲層覆蓋情況</div>\r\n              <div className=\"flex items-center text-xs mt-2\">\r\n                <span className={theme.highlight}>查看預測</span>\r\n                <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n              </div>\r\n            </div>\r\n          </a>\r\n          \r\n          <a \r\n            href=\"https://www.spaceweatherlive.com/en/auroral-activity/aurora-forecast.html\" \r\n            target=\"_blank\" \r\n            rel=\"noopener noreferrer\"\r\n            className={`p-4 rounded-lg ${theme.darkMode ? 'bg-purple-900 bg-opacity-20 hover:bg-opacity-30' : 'bg-purple-50 hover:bg-purple-100'} transition flex items-start gap-3`}\r\n          >\r\n            <div className={`${theme.darkMode ? 'text-purple-300' : 'text-purple-600'} mt-1`}>\r\n              <Star className=\"w-4 h-4\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"font-medium mb-1\">Space Weather Live</div>\r\n              <div className={`text-sm ${theme.secondaryText}`}>提供全球極光預測和太陽活動即時資訊</div>\r\n              <div className=\"flex items-center text-xs mt-2\">\r\n                <span className={theme.highlight}>查看預測</span>\r\n                <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n              </div>\r\n            </div>\r\n          </a>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* 道路警報部分 */}\r\n      <div className={`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder}`}>\r\n        <div className=\"flex items-center gap-2 mb-3\">\r\n          <AlertCircle className={`w-5 h-5 ${theme.darkMode ? 'text-red-400' : 'text-red-500'}`} />\r\n          <h3 className=\"text-lg font-semibold\">道路警報</h3>\r\n        </div>\r\n        \r\n        {isLoading ? (\r\n          <div className=\"py-8 flex justify-center\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500\"></div>\r\n          </div>\r\n        ) : error ? (\r\n          <div className={`p-4 rounded-lg ${theme.darkMode ? 'bg-red-900 bg-opacity-20' : 'bg-red-50'}`}>\r\n            <p className={theme.darkMode ? 'text-red-300' : 'text-red-600'}>{error}</p>\r\n            {!isOnline && (\r\n              <p className=\"text-sm mt-2\">您目前處於離線模式。請連接網絡後重試。</p>\r\n            )}\r\n          </div>\r\n        ) : roadAlerts.length > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            {roadAlerts.slice(0, 5).map((alert, index) => (\r\n              <div \r\n                key={alert.id || index}\r\n                className={`p-3 rounded-lg ${getStatusBackground(alert.status, theme.darkMode)}`}\r\n              >\r\n                <div className=\"flex justify-between items-start\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {getStatusIcon(alert.status)}\r\n                    <span className=\"font-medium\">{alert.road || alert.title}</span>\r\n                  </div>\r\n                  <div className={`text-xs ${theme.secondaryText}`}>\r\n                    {alert.pubDate ? new Date(alert.pubDate).toLocaleDateString() : ''}\r\n                  </div>\r\n                </div>\r\n                \r\n                <p className=\"text-sm mt-1 line-clamp-2\">{alert.description}</p>\r\n                \r\n                {alert.link && (\r\n                  <a \r\n                    href={alert.link} \r\n                    target=\"_blank\" \r\n                    rel=\"noopener noreferrer\"\r\n                    className={`text-xs flex items-center mt-2 ${theme.highlight}`}\r\n                  >\r\n                    <span>查看詳情</span>\r\n                    <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n                  </a>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {roadAlerts.length > 5 && (\r\n              <p className={`text-sm ${theme.secondaryText} text-center`}>\r\n                還有 {roadAlerts.length - 5} 則警報未顯示\r\n              </p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className={`p-4 rounded-lg ${theme.darkMode ? 'bg-blue-900 bg-opacity-20' : 'bg-blue-50'} text-center`}>\r\n            <p>目前沒有活躍的道路警報</p>\r\n            <p className=\"text-sm mt-1\">安全順利的旅程！</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Information Resources - Link Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {/* Road Conditions Link Card */}\r\n        <a \r\n          href=\"https://www.road.is/travel-info/road-conditions-and-weather/\" \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\"\r\n          className={`${theme.cardBg} rounded-xl p-4 ${theme.cardBorder} hover:shadow-lg transition-all transform hover:-translate-y-1`}\r\n        >\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <div className={`${theme.darkMode ? 'bg-blue-800' : 'bg-blue-100'} rounded-full p-2`}>\r\n              <Info className={`h-5 w-5 ${theme.darkMode ? 'text-blue-200' : 'text-blue-600'}`} />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold\">道路狀況</h3>\r\n          </div>\r\n          \r\n          <p className={`${theme.secondaryText} text-sm mb-3`}>\r\n            查看冰島官方道路管理局發布的道路狀況和封閉信息，確保安全行車。\r\n          </p>\r\n          \r\n          <div className=\"flex items-center text-sm font-medium mt-auto\">\r\n            <span className={theme.highlight}>查看官方信息</span>\r\n            <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n          </div>\r\n        </a>\r\n        \r\n        {/* SafeTravel Link Card */}\r\n        <a \r\n          href=\"https://safetravel.is/\" \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\"\r\n          className={`${theme.cardBg} rounded-xl p-4 ${theme.cardBorder} hover:shadow-lg transition-all transform hover:-translate-y-1`}\r\n        >\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <div className={`${theme.darkMode ? 'bg-green-800' : 'bg-green-100'} rounded-full p-2`}>\r\n              <AlertCircle className={`h-5 w-5 ${theme.darkMode ? 'text-green-200' : 'text-green-600'}`} />\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold\">安全旅行</h3>\r\n          </div>\r\n          \r\n          <p className={`${theme.secondaryText} text-sm mb-3`}>\r\n            查看冰島官方安全旅行網站，獲取最新的安全警示和旅行建議。\r\n          </p>\r\n          \r\n          <div className=\"flex items-center text-sm font-medium mt-auto\">\r\n            <span className={theme.highlight}>訪問安全旅行網站</span>\r\n            <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n          </div>\r\n        </a>\r\n      </div>\r\n      \r\n      {/* Safety Tips */}\r\n      <div className={`${theme.cardBg} rounded-xl p-5 ${theme.cardBorder} border-amber-200 ${theme.darkMode ? 'border-opacity-30' : ''}`}>\r\n        <div className=\"flex items-center gap-2 mb-3\">\r\n          <AlertCircle className={`w-5 h-5 ${theme.darkMode ? 'text-amber-400' : 'text-amber-500'}`} />\r\n          <h3 className=\"text-lg font-semibold\">旅行安全提示</h3>\r\n        </div>\r\n        \r\n        <ul className=\"space-y-2\">\r\n          <li className=\"flex items-start gap-2\">\r\n            <span className={theme.darkMode ? 'text-amber-400' : 'text-amber-500'}>•</span>\r\n            <span>冬季冰島天氣多變，請務必時刻關注天氣預報及路況，並預留充裕的交通時間。</span>\r\n          </li>\r\n          <li className=\"flex items-start gap-2\">\r\n            <span className={theme.darkMode ? 'text-amber-400' : 'text-amber-500'}>•</span>\r\n            <span>緊急電話：112 (全冰島通用)。建議下載冰島112官方應用程式，可在緊急情況下求助。</span>\r\n          </li>\r\n          <li className=\"flex items-start gap-2\">\r\n            <span className={theme.darkMode ? 'text-amber-400' : 'text-amber-500'}>•</span>\r\n            <span>冬季道路行駛需格外謹慎，F開頭的高地道路在冬季通常會完全關閉。</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveInfo;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,SAAS,CAAEC,WAAW,CAAEC,YAAY,CAAEC,GAAG,CAAEC,SAAS,CAAEC,IAAI,CAAEC,OAAO,CAAEC,WAAW,CAAEC,OAAO,CAAEC,aAAa,CAAEC,UAAU,CAAEC,IAAI,CAAEC,IAAI,KAAQ,cAAc,CACrK,OAASC,eAAe,CAAEC,kBAAkB,KAAQ,wBAAwB,CAC5E,OAASC,WAAW,CAAEC,cAAc,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzE,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAe,IAAd,CAAEC,KAAM,CAAC,CAAAD,IAAA,CACzB,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC6B,SAAS,CAAEC,YAAY,CAAC,CAAG9B,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAC+B,QAAQ,CAAEC,WAAW,CAAC,CAAGhC,QAAQ,CAACiC,SAAS,CAACC,MAAM,CAAC,CAC1D,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGpC,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACqC,KAAK,CAAEC,QAAQ,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAExC;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsC,kBAAkB,CAAGA,CAAA,GAAM,CAC/BP,WAAW,CAACC,SAAS,CAACC,MAAM,CAAC,CAC/B,CAAC,CAEDM,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAEF,kBAAkB,CAAC,CACrDC,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEF,kBAAkB,CAAC,CAEtD;AACA,KAAM,CAAAG,yBAAyB,CAAIC,KAAK,EAAK,CAC3CX,WAAW,CAACW,KAAK,CAACC,MAAM,CAACb,QAAQ,CAAC,CACpC,CAAC,CAEDS,MAAM,CAACC,gBAAgB,CAAC,uBAAuB,CAAEC,yBAAyB,CAAC,CAE3E,MAAO,IAAM,CACXF,MAAM,CAACK,mBAAmB,CAAC,QAAQ,CAAEN,kBAAkB,CAAC,CACxDC,MAAM,CAACK,mBAAmB,CAAC,SAAS,CAAEN,kBAAkB,CAAC,CACzDC,MAAM,CAACK,mBAAmB,CAAC,uBAAuB,CAAEH,yBAAyB,CAAC,CAChF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACAzC,SAAS,CAAC,IAAM,CACd6C,cAAc,CAAC,CAAC,CAEhB;AACA,KAAM,CAAAC,QAAQ,CAAG5B,cAAc,CAAC,CAAC,CACjC,GAAI4B,QAAQ,CAAE,CACZX,cAAc,CAACW,QAAQ,CAAC,CAC1B,CAEA;AACA,KAAM,CAAAC,eAAe,CAAGC,WAAW,CAAC,IAAM,CACxC,GAAIhB,SAAS,CAACC,MAAM,CAAE,CACpBY,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,EAAE,CAAG,EAAE,CAAG,IAAI,CAAC,CAAE;AAEpB,MAAO,IAAMI,aAAa,CAACF,eAAe,CAAC,CAC7C,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAF,cAAc,CAAG,cAAAA,CAAA,CAAgC,IAAzB,CAAAK,YAAY,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CAChDtB,YAAY,CAAC,IAAI,CAAC,CAClBQ,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF;AACA,KAAM,CAAAiB,kBAAkB,CAAGJ,YAAY,EAAIpB,QAAQ,CACnD,KAAM,CAAAyB,MAAM,CAAG,KAAM,CAAAxC,eAAe,CAACuC,kBAAkB,CAAC,CAExD3B,aAAa,CAAC4B,MAAM,CAAC,CAErB;AACA,KAAM,CAAAT,QAAQ,CAAG5B,cAAc,CAAC,CAAC,CACjC,GAAI4B,QAAQ,CAAE,CACZX,cAAc,CAACW,QAAQ,CAAC,CAC1B,CACF,CAAE,MAAOV,KAAK,CAAE,CACdoB,OAAO,CAACpB,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjCC,QAAQ,CAAC,gBAAgB,CAAC,CAC5B,CAAC,OAAS,CACRR,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAA4B,aAAa,CAAGA,CAAA,GAAM,CAC1BZ,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED;AACA,KAAM,CAAAa,iBAAiB,CAAIC,IAAI,EAAK,CAClC,GAAI,CAACA,IAAI,CAAE,MAAO,IAAI,CAEtB,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAC,MAAM,CAAGF,GAAG,CAAGD,IAAI,CACzB,KAAM,CAAAI,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACH,MAAM,EAAI,IAAI,CAAG,EAAE,CAAC,CAAC,CAEjD,GAAIC,QAAQ,CAAG,CAAC,CAAE,CAChB,MAAO,IAAI,CACb,CAAC,IAAM,IAAIA,QAAQ,CAAG,EAAE,CAAE,CACxB,MAAO,GAAGA,QAAQ,MAAM,CAC1B,CAAC,IAAM,IAAIA,QAAQ,CAAG,EAAE,CAAG,EAAE,CAAE,CAC7B,KAAM,CAAAG,KAAK,CAAGF,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,EAAE,CAAC,CACvC,MAAO,GAAGG,KAAK,MAAM,CACvB,CAAC,IAAM,CACL,KAAM,CAAAC,IAAI,CAAGH,IAAI,CAACC,KAAK,CAACF,QAAQ,EAAI,EAAE,CAAG,EAAE,CAAC,CAAC,CAC7C,MAAO,GAAGI,IAAI,KAAK,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAIC,MAAM,EAAK,CAChC,OAAOA,MAAM,EACX,IAAK,QAAQ,CACX,mBAAOjD,IAAA,CAACV,OAAO,EAAC4D,SAAS,CAAC,sBAAsB,CAAE,CAAC,CACrD,IAAK,SAAS,CACZ,mBAAOlD,IAAA,CAACT,aAAa,EAAC2D,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC9D,IAAK,SAAS,CACZ,mBAAOlD,IAAA,CAACT,aAAa,EAAC2D,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC9D,IAAK,MAAM,CACT,mBAAOlD,IAAA,CAACX,WAAW,EAAC6D,SAAS,CAAC,wBAAwB,CAAE,CAAC,CAC3D,QACE,mBAAOlD,IAAA,CAACR,UAAU,EAAC0D,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC3D,CACF,CAAC,CAED;AACA,KAAM,CAAAC,mBAAmB,CAAGA,CAACF,MAAM,CAAEG,UAAU,GAAK,CAClD,OAAOH,MAAM,EACX,IAAK,QAAQ,CACX,MAAO,CAAAG,UAAU,CAAG,0BAA0B,CAAG,WAAW,CAC9D,IAAK,SAAS,CACZ,MAAO,CAAAA,UAAU,CAAG,6BAA6B,CAAG,cAAc,CACpE,IAAK,SAAS,CACZ,MAAO,CAAAA,UAAU,CAAG,6BAA6B,CAAG,cAAc,CACpE,IAAK,MAAM,CACT,MAAO,CAAAA,UAAU,CAAG,4BAA4B,CAAG,aAAa,CAClE,QACE,MAAO,CAAAA,UAAU,CAAG,2BAA2B,CAAG,YAAY,CAClE,CACF,CAAC,CAED,mBACElD,KAAA,QAAKgD,SAAS,CAAC,gBAAgB,CAAAG,QAAA,eAC7BnD,KAAA,QAAKgD,SAAS,CAAC,mCAAmC,CAAAG,QAAA,eAChDnD,KAAA,OAAIgD,SAAS,CAAE,+CAAgD,CAAAG,QAAA,eAC7DrD,IAAA,CAACnB,IAAI,EAACqE,SAAS,CAAE,WAAW7C,KAAK,CAACiD,SAAS,EAAG,CAAE,CAAC,cACjDtD,IAAA,SAAAqD,QAAA,CAAM,sCAAM,CAAM,CAAC,EACjB,CAAC,cAGLnD,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAG,QAAA,EACrC3C,QAAQ,cACPR,KAAA,QAAKgD,SAAS,CAAC,kCAAkC,CAAAG,QAAA,eAC/CrD,IAAA,CAACb,IAAI,EAAC+D,SAAS,CAAC,cAAc,CAAE,CAAC,cACjClD,IAAA,SAAMkD,SAAS,CAAC,SAAS,CAAAG,QAAA,CAAC,cAAE,CAAM,CAAC,EAChC,CAAC,cAENnD,KAAA,QAAKgD,SAAS,CAAC,mCAAmC,CAAAG,QAAA,eAChDrD,IAAA,CAACZ,OAAO,EAAC8D,SAAS,CAAC,cAAc,CAAE,CAAC,cACpClD,IAAA,SAAMkD,SAAS,CAAC,SAAS,CAAAG,QAAA,CAAC,0BAAI,CAAM,CAAC,EAClC,CACN,cAGDrD,IAAA,WACEuD,OAAO,CAAElB,aAAc,CACvBmB,QAAQ,CAAEhD,SAAS,EAAI,CAACE,QAAS,CACjCwC,SAAS,CAAE,eAAe7C,KAAK,CAACoD,MAAM,iCAAkC,CACxEC,KAAK,CAAC,sCAAQ,CAAAL,QAAA,cAEdrD,IAAA,CAACd,SAAS,EAACgE,SAAS,CAAE,WAAW1C,SAAS,CAAG,cAAc,CAAG,EAAE,EAAG,CAAE,CAAC,CAChE,CAAC,EACN,CAAC,EACH,CAAC,CAGLM,WAAW,eACVZ,KAAA,QAAKgD,SAAS,CAAE,WAAW7C,KAAK,CAACsD,aAAa,QAAS,CAAAN,QAAA,EAAC,4BAChD,CAACf,iBAAiB,CAACxB,WAAW,CAAC,CACpCjB,WAAW,CAAC,CAAC,EAAI,CAACW,SAAS,eAC1BR,IAAA,SAAMkD,SAAS,CAAC,sBAAsB,CAAAG,QAAA,CAAC,wDAAS,CAAM,CACvD,EACE,CACN,cAGDnD,KAAA,QAAKgD,SAAS,CAAE,GAAG7C,KAAK,CAACuD,MAAM,mBAAmBvD,KAAK,CAACwD,UAAU,sBAAsBxD,KAAK,CAACyD,QAAQ,CAAG,mBAAmB,CAAG,EAAE,EAAG,CAAAT,QAAA,eAClInD,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eAC3CrD,IAAA,QAAKkD,SAAS,CAAE,GAAG7C,KAAK,CAACyD,QAAQ,CAAG,iBAAiB,CAAG,iBAAiB,EAAG,CAAAT,QAAA,cAC1ErD,IAAA,CAACP,IAAI,EAACyD,SAAS,CAAC,SAAS,CAAE,CAAC,CACzB,CAAC,cACNlD,IAAA,OAAIkD,SAAS,CAAC,uBAAuB,CAAAG,QAAA,CAAC,gCAAK,CAAI,CAAC,EAC7C,CAAC,cAENrD,IAAA,MAAGkD,SAAS,CAAE,GAAG7C,KAAK,CAACsD,aAAa,OAAQ,CAAAN,QAAA,CAAC,oSAE7C,CAAG,CAAC,cAEJnD,KAAA,QAAKgD,SAAS,CAAC,uCAAuC,CAAAG,QAAA,eACpDnD,KAAA,MACE6D,IAAI,CAAC,+CAA+C,CACpDC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBf,SAAS,CAAE,kBAAkB7C,KAAK,CAACyD,QAAQ,CAAG,iDAAiD,CAAG,kCAAkC,oCAAqC,CAAAT,QAAA,eAEzKrD,IAAA,QAAKkD,SAAS,CAAE,GAAG7C,KAAK,CAACyD,QAAQ,CAAG,iBAAiB,CAAG,iBAAiB,OAAQ,CAAAT,QAAA,cAC/ErD,IAAA,CAACN,IAAI,EAACwD,SAAS,CAAC,SAAS,CAAE,CAAC,CACzB,CAAC,cACNhD,KAAA,QAAAmD,QAAA,eACErD,IAAA,QAAKkD,SAAS,CAAC,kBAAkB,CAAAG,QAAA,CAAC,wDAAS,CAAK,CAAC,cACjDrD,IAAA,QAAKkD,SAAS,CAAE,WAAW7C,KAAK,CAACsD,aAAa,EAAG,CAAAN,QAAA,CAAC,sIAAsB,CAAK,CAAC,cAC9EnD,KAAA,QAAKgD,SAAS,CAAC,gCAAgC,CAAAG,QAAA,eAC7CrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACiD,SAAU,CAAAD,QAAA,CAAC,0BAAI,CAAM,CAAC,cAC7CrD,IAAA,CAAChB,YAAY,EAACkE,SAAS,CAAC,cAAc,CAAE,CAAC,EACtC,CAAC,EACH,CAAC,EACL,CAAC,cAEJhD,KAAA,MACE6D,IAAI,CAAC,2EAA2E,CAChFC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBf,SAAS,CAAE,kBAAkB7C,KAAK,CAACyD,QAAQ,CAAG,iDAAiD,CAAG,kCAAkC,oCAAqC,CAAAT,QAAA,eAEzKrD,IAAA,QAAKkD,SAAS,CAAE,GAAG7C,KAAK,CAACyD,QAAQ,CAAG,iBAAiB,CAAG,iBAAiB,OAAQ,CAAAT,QAAA,cAC/ErD,IAAA,CAACN,IAAI,EAACwD,SAAS,CAAC,SAAS,CAAE,CAAC,CACzB,CAAC,cACNhD,KAAA,QAAAmD,QAAA,eACErD,IAAA,QAAKkD,SAAS,CAAC,kBAAkB,CAAAG,QAAA,CAAC,oBAAkB,CAAK,CAAC,cAC1DrD,IAAA,QAAKkD,SAAS,CAAE,WAAW7C,KAAK,CAACsD,aAAa,EAAG,CAAAN,QAAA,CAAC,wGAAiB,CAAK,CAAC,cACzEnD,KAAA,QAAKgD,SAAS,CAAC,gCAAgC,CAAAG,QAAA,eAC7CrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACiD,SAAU,CAAAD,QAAA,CAAC,0BAAI,CAAM,CAAC,cAC7CrD,IAAA,CAAChB,YAAY,EAACkE,SAAS,CAAC,cAAc,CAAE,CAAC,EACtC,CAAC,EACH,CAAC,EACL,CAAC,EACD,CAAC,EACH,CAAC,cAGNhD,KAAA,QAAKgD,SAAS,CAAE,GAAG7C,KAAK,CAACuD,MAAM,mBAAmBvD,KAAK,CAACwD,UAAU,EAAG,CAAAR,QAAA,eACnEnD,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eAC3CrD,IAAA,CAACjB,WAAW,EAACmE,SAAS,CAAE,WAAW7C,KAAK,CAACyD,QAAQ,CAAG,cAAc,CAAG,cAAc,EAAG,CAAE,CAAC,cACzF9D,IAAA,OAAIkD,SAAS,CAAC,uBAAuB,CAAAG,QAAA,CAAC,0BAAI,CAAI,CAAC,EAC5C,CAAC,CAEL7C,SAAS,cACRR,IAAA,QAAKkD,SAAS,CAAC,0BAA0B,CAAAG,QAAA,cACvCrD,IAAA,QAAKkD,SAAS,CAAC,8DAA8D,CAAM,CAAC,CACjF,CAAC,CACJlC,KAAK,cACPd,KAAA,QAAKgD,SAAS,CAAE,kBAAkB7C,KAAK,CAACyD,QAAQ,CAAG,0BAA0B,CAAG,WAAW,EAAG,CAAAT,QAAA,eAC5FrD,IAAA,MAAGkD,SAAS,CAAE7C,KAAK,CAACyD,QAAQ,CAAG,cAAc,CAAG,cAAe,CAAAT,QAAA,CAAErC,KAAK,CAAI,CAAC,CAC1E,CAACN,QAAQ,eACRV,IAAA,MAAGkD,SAAS,CAAC,cAAc,CAAAG,QAAA,CAAC,oHAAmB,CAAG,CACnD,EACE,CAAC,CACJ/C,UAAU,CAAC0B,MAAM,CAAG,CAAC,cACvB9B,KAAA,QAAKgD,SAAS,CAAC,WAAW,CAAAG,QAAA,EACvB/C,UAAU,CAAC4D,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBACvCnE,KAAA,QAEEgD,SAAS,CAAE,kBAAkBC,mBAAmB,CAACiB,KAAK,CAACnB,MAAM,CAAE5C,KAAK,CAACyD,QAAQ,CAAC,EAAG,CAAAT,QAAA,eAEjFnD,KAAA,QAAKgD,SAAS,CAAC,kCAAkC,CAAAG,QAAA,eAC/CnD,KAAA,QAAKgD,SAAS,CAAC,yBAAyB,CAAAG,QAAA,EACrCL,aAAa,CAACoB,KAAK,CAACnB,MAAM,CAAC,cAC5BjD,IAAA,SAAMkD,SAAS,CAAC,aAAa,CAAAG,QAAA,CAAEe,KAAK,CAACE,IAAI,EAAIF,KAAK,CAACV,KAAK,CAAO,CAAC,EAC7D,CAAC,cACN1D,IAAA,QAAKkD,SAAS,CAAE,WAAW7C,KAAK,CAACsD,aAAa,EAAG,CAAAN,QAAA,CAC9Ce,KAAK,CAACG,OAAO,CAAG,GAAI,CAAA9B,IAAI,CAAC2B,KAAK,CAACG,OAAO,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAG,EAAE,CAC/D,CAAC,EACH,CAAC,cAENxE,IAAA,MAAGkD,SAAS,CAAC,2BAA2B,CAAAG,QAAA,CAAEe,KAAK,CAACK,WAAW,CAAI,CAAC,CAE/DL,KAAK,CAACM,IAAI,eACTxE,KAAA,MACE6D,IAAI,CAAEK,KAAK,CAACM,IAAK,CACjBV,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBf,SAAS,CAAE,kCAAkC7C,KAAK,CAACiD,SAAS,EAAG,CAAAD,QAAA,eAE/DrD,IAAA,SAAAqD,QAAA,CAAM,0BAAI,CAAM,CAAC,cACjBrD,IAAA,CAAChB,YAAY,EAACkE,SAAS,CAAC,cAAc,CAAE,CAAC,EACxC,CACJ,GAzBIkB,KAAK,CAACO,EAAE,EAAIN,KA0Bd,CACN,CAAC,CAED/D,UAAU,CAAC0B,MAAM,CAAG,CAAC,eACpB9B,KAAA,MAAGgD,SAAS,CAAE,WAAW7C,KAAK,CAACsD,aAAa,cAAe,CAAAN,QAAA,EAAC,eACvD,CAAC/C,UAAU,CAAC0B,MAAM,CAAG,CAAC,CAAC,uCAC5B,EAAG,CACJ,EACE,CAAC,cAEN9B,KAAA,QAAKgD,SAAS,CAAE,kBAAkB7C,KAAK,CAACyD,QAAQ,CAAG,2BAA2B,CAAG,YAAY,cAAe,CAAAT,QAAA,eAC1GrD,IAAA,MAAAqD,QAAA,CAAG,oEAAW,CAAG,CAAC,cAClBrD,IAAA,MAAGkD,SAAS,CAAC,cAAc,CAAAG,QAAA,CAAC,kDAAQ,CAAG,CAAC,EACrC,CACN,EACE,CAAC,cAGNnD,KAAA,QAAKgD,SAAS,CAAC,uCAAuC,CAAAG,QAAA,eAEpDnD,KAAA,MACE6D,IAAI,CAAC,8DAA8D,CACnEC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBf,SAAS,CAAE,GAAG7C,KAAK,CAACuD,MAAM,mBAAmBvD,KAAK,CAACwD,UAAU,gEAAiE,CAAAR,QAAA,eAE9HnD,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eAC3CrD,IAAA,QAAKkD,SAAS,CAAE,GAAG7C,KAAK,CAACyD,QAAQ,CAAG,aAAa,CAAG,aAAa,mBAAoB,CAAAT,QAAA,cACnFrD,IAAA,CAACnB,IAAI,EAACqE,SAAS,CAAE,WAAW7C,KAAK,CAACyD,QAAQ,CAAG,eAAe,CAAG,eAAe,EAAG,CAAE,CAAC,CACjF,CAAC,cACN9D,IAAA,OAAIkD,SAAS,CAAC,uBAAuB,CAAAG,QAAA,CAAC,0BAAI,CAAI,CAAC,EAC5C,CAAC,cAENrD,IAAA,MAAGkD,SAAS,CAAE,GAAG7C,KAAK,CAACsD,aAAa,eAAgB,CAAAN,QAAA,CAAC,4LAErD,CAAG,CAAC,cAEJnD,KAAA,QAAKgD,SAAS,CAAC,+CAA+C,CAAAG,QAAA,eAC5DrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACiD,SAAU,CAAAD,QAAA,CAAC,sCAAM,CAAM,CAAC,cAC/CrD,IAAA,CAAChB,YAAY,EAACkE,SAAS,CAAC,cAAc,CAAE,CAAC,EACtC,CAAC,EACL,CAAC,cAGJhD,KAAA,MACE6D,IAAI,CAAC,wBAAwB,CAC7BC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBf,SAAS,CAAE,GAAG7C,KAAK,CAACuD,MAAM,mBAAmBvD,KAAK,CAACwD,UAAU,gEAAiE,CAAAR,QAAA,eAE9HnD,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eAC3CrD,IAAA,QAAKkD,SAAS,CAAE,GAAG7C,KAAK,CAACyD,QAAQ,CAAG,cAAc,CAAG,cAAc,mBAAoB,CAAAT,QAAA,cACrFrD,IAAA,CAACjB,WAAW,EAACmE,SAAS,CAAE,WAAW7C,KAAK,CAACyD,QAAQ,CAAG,gBAAgB,CAAG,gBAAgB,EAAG,CAAE,CAAC,CAC1F,CAAC,cACN9D,IAAA,OAAIkD,SAAS,CAAC,uBAAuB,CAAAG,QAAA,CAAC,0BAAI,CAAI,CAAC,EAC5C,CAAC,cAENrD,IAAA,MAAGkD,SAAS,CAAE,GAAG7C,KAAK,CAACsD,aAAa,eAAgB,CAAAN,QAAA,CAAC,0KAErD,CAAG,CAAC,cAEJnD,KAAA,QAAKgD,SAAS,CAAC,+CAA+C,CAAAG,QAAA,eAC5DrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACiD,SAAU,CAAAD,QAAA,CAAC,kDAAQ,CAAM,CAAC,cACjDrD,IAAA,CAAChB,YAAY,EAACkE,SAAS,CAAC,cAAc,CAAE,CAAC,EACtC,CAAC,EACL,CAAC,EACD,CAAC,cAGNhD,KAAA,QAAKgD,SAAS,CAAE,GAAG7C,KAAK,CAACuD,MAAM,mBAAmBvD,KAAK,CAACwD,UAAU,qBAAqBxD,KAAK,CAACyD,QAAQ,CAAG,mBAAmB,CAAG,EAAE,EAAG,CAAAT,QAAA,eACjInD,KAAA,QAAKgD,SAAS,CAAC,8BAA8B,CAAAG,QAAA,eAC3CrD,IAAA,CAACjB,WAAW,EAACmE,SAAS,CAAE,WAAW7C,KAAK,CAACyD,QAAQ,CAAG,gBAAgB,CAAG,gBAAgB,EAAG,CAAE,CAAC,cAC7F9D,IAAA,OAAIkD,SAAS,CAAC,uBAAuB,CAAAG,QAAA,CAAC,sCAAM,CAAI,CAAC,EAC9C,CAAC,cAENnD,KAAA,OAAIgD,SAAS,CAAC,WAAW,CAAAG,QAAA,eACvBnD,KAAA,OAAIgD,SAAS,CAAC,wBAAwB,CAAAG,QAAA,eACpCrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACyD,QAAQ,CAAG,gBAAgB,CAAG,gBAAiB,CAAAT,QAAA,CAAC,QAAC,CAAM,CAAC,cAC/ErD,IAAA,SAAAqD,QAAA,CAAM,oNAAmC,CAAM,CAAC,EAC9C,CAAC,cACLnD,KAAA,OAAIgD,SAAS,CAAC,wBAAwB,CAAAG,QAAA,eACpCrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACyD,QAAQ,CAAG,gBAAgB,CAAG,gBAAiB,CAAAT,QAAA,CAAC,QAAC,CAAM,CAAC,cAC/ErD,IAAA,SAAAqD,QAAA,CAAM,uNAA2C,CAAM,CAAC,EACtD,CAAC,cACLnD,KAAA,OAAIgD,SAAS,CAAC,wBAAwB,CAAAG,QAAA,eACpCrD,IAAA,SAAMkD,SAAS,CAAE7C,KAAK,CAACyD,QAAQ,CAAG,gBAAgB,CAAG,gBAAiB,CAAAT,QAAA,CAAC,QAAC,CAAM,CAAC,cAC/ErD,IAAA,SAAAqD,QAAA,CAAM,uLAA+B,CAAM,CAAC,EAC1C,CAAC,EACH,CAAC,EACF,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlD,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}